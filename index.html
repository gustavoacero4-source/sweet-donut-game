<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Sweet Donut AR</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

<style>
body { margin:0; overflow:hidden; font-family:sans-serif; }

#bubble {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  background: #ffe3f0;
  color: #7a2e4a;
  padding: 16px 22px;
  border-radius: 30px;
  font-size: 18px;
  box-shadow: 0 10px 25px rgba(0,0,0,.2);
  display: none;
  text-align: center;
  max-width: 85%;
}
</style>
</head>

<body>

<div id="bubble"></div>

<a-scene
  embedded
  arjs="sourceType: webcam; debugUIEnabled: false"
  vr-mode-ui="enabled: false">

  <!-- QR CON LOGO -->
  <a-marker type="barcode" value="0" id="marker">

    <!-- MASCOTA DONA -->
    <a-entity position="0 0 0" scale="0.8 0.8 0.8">

      <!-- CUERPO -->
      <a-torus radius="0.45" radius-tubular="0.18"
        material="color:#ff8fcf; roughness:0.3"></a-torus>

      <!-- OJOS -->
      <a-sphere position="-0.15 0.12 0.35" radius="0.05" color="#000"></a-sphere>
      <a-sphere position="0.15 0.12 0.35" radius="0.05" color="#000"></a-sphere>

      <!-- BRAZOS -->
      <a-cylinder position="-0.5 0 0" radius="0.04" height="0.4"
        color="#ff8fcf"
        animation="property: rotation; dir: alternate; dur: 1000; loop:true; to: 0 0 -30"></a-cylinder>

      <a-cylinder position="0.5 0 0" radius="0.04" height="0.4"
        color="#ff8fcf"
        animation="property: rotation; dir: alternate; dur: 1000; loop:true; to: 0 0 30"></a-cylinder>

      <!-- SALTO -->
      <a-animation
        attribute="position"
        direction="alternate"
        dur="1200"
        to="0 0.25 0"
        repeat="indefinite"></a-animation>

    </a-entity>

  </a-marker>

  <a-entity camera></a-entity>
</a-scene>

<script>
const frases = [
  "Â¡Hola! Bienvenido a Sweet Donut ðŸ©",
  "Las donas hacen feliz el dÃ­a ðŸ˜‹",
  "Hoy es un buen dÃ­a para una dona ðŸ’–",
  "Comparte dulzura ðŸŽ‰",
  "Sweet Donut te espera âœ¨"
];

const bubble = document.getElementById("bubble");
const marker = document.getElementById("marker");

function hablar(texto){
  const voz = new SpeechSynthesisUtterance(texto);
  voz.lang = "es-ES";
  voz.pitch = 1.2;
  voz.rate = 1;
  speechSynthesis.speak(voz);
}

marker.addEventListener("markerFound", () => {
  const texto = frases[Math.floor(Math.random()*frases.length)];
  bubble.textContent = texto;
  bubble.style.display = "block";
  hablar(texto);
  setTimeout(()=>bubble.style.display="none", 4000);
});
</script>

</body>
</html>
